<html>
<head>
<script src="vue.min.js"></script>
<script src="reqwest.min.js"></script>

</head>
<body>

<div id="demo">
    <div v-component="{{page}}"></div>
</div>

<script type="text/javascript">


Vue.component('detail-1', {
    inherit: true,
    replace: true,
    template: '<div class="home"><h1>Detail</h1><p>{{mydata.test}}</p><img v-attr="src:mydata.img" /></div>',
    data: function () {
        return {
            mydata: {}
        }
    },
    compiled: function(){
        this.loadData("single.json", function(data){
            console.log(data)
            this.mydata = data
        }.bind(this))
    },
    methods: {
    }
})


Vue.component('home-1', {
    inherit: true,
    replace: true,
    template: '<div class="home"><p v-repeat="names" v-on="click:setPage(\'detail-1\',$index)">{{name}}</p></div>',
     // v-if="page==\"home\""><h1>Home</h1><input type="text" v-model="mysearch" /><p v-repeat="names | filterBy mysearch" v-on="click:setPage(\"detail\",$index)">{{name}}</p></div>
    data: function () {
        return {
            mysearch: "x"
        }
    },
    compiled: function(){
        this.loadData("test.json", function(data){
            this.names = data
        }.bind(this))
    },
    methods: {
        back: function(){
            this.page = "home"
        }
    }
})



var vm = new Vue({
  el: '#demo',
  data: {
    id: null,
    page: "home-1",
    names: []
  },

  methods: {
    setPage: function (page, id) {
      this.page = page
      this.id = id
    },
    loadData: function(url,callback){
        reqwest(url, function (data) {
            callback(data)
        })
    }
  }

})

</script>
</body>
</html>
