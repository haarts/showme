<html>
<head>
<script src="vue.min.js"></script>
<script src="reqwest.min.js"></script>

</head>
<body>

<div id="shows">
    <div v-component="{{page}}"></div>
</div>

<script type="text/javascript">

Vue.component('detail', {
    inherit: true,
    replace: true,
    template: '<div class="home"><h1>Detail</h1><p>{{show.title}} - {{show.aired_episodes}}</p><img v-attr="src:show.images.thumb.full" /></div>',
    data: function () {
        return {
            show: {}
        }
    },
    compiled: function(){
        this.loadData(this.id, function(data){
            this.show = data
        }.bind(this))
    },
    methods: {
    }
})


Vue.component('home', {
    inherit: true,
    replace: true,
    template: '<div class="home"><p v-repeat="shows" v-on="click:setPage(\'detail\', url)">{{title}}</p></div>',
    compiled: function(){
        this.loadData("shows.json", function(data){
            this.shows = data
        }.bind(this))
    },
    methods: {
        back: function(){
            this.page = "home"
        }
    }
})

var vm = new Vue({
  el: '#shows',
  data: {
    id: null,
    page: "home",
    shows: []
  },

  methods: {
    setPage: function (page, id) {
      this.page = page
      this.id = id
    },
    loadData: function(url, callback){
        reqwest(url, function (data) {
            callback(data)
        })
    }
  }

})

</script>
</body>
</html>
